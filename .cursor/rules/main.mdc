---
alwaysApply: true
---

# Specification File Reference

Always read and reference the file `specs/core.yaml` as the specification document for this project.

Before making any code changes or answering questions about the project architecture:
1. First read the specification file at `specs/core.yaml`
2. Ensure your responses and code align with the specifications defined in that file
3. If there's any conflict between the spec and the current request, point out the discrepancy

The specification file should be treated as the source of truth for:
- Project architecture
- Design patterns
- Coding standards
- API contracts
- Business logic rules

When writing code, always verify it matches the specifications in `specs/core.yaml`.

---

# Current Technology Stack

## Monorepo Infrastructure
- **Package Manager**: pnpm 8.15.0 (workspaces)
- **Build System**: Turborepo 2.6.0 (build caching & parallel execution)
- **Node Linker**: isolated mode (strict dependency resolution)
- **TypeScript**: 5.x (strict mode enabled)
- **Node.js**: >=18.0.0

## Frontend Stack
- **Framework**: Next.js 15.5.4 (App Router)
- **Language**: TypeScript 5.x
- **UI Library**: React 19.1.0
- **Styling**: Tailwind CSS v4
- **Component Library**: shadcn/ui
- **UI Primitives**: Radix UI
- **Icons**: Lucide React 0.545.0
- **Animations**: tw-animate-css 1.4.0
- **Forms**: React Hook Form 7.65.0 + Zod 4.1.12
- **HTTP Client**: Axios 1.12.2
- **Build Tool**: Turbopack (Next.js)
- **Linting**: ESLint 9.x + eslint-config-next

## Backend Stack
- **Framework**: NestJS 10.x
- **Language**: TypeScript 5.1.3
- **Database**: PostgreSQL (via Supabase)
- **ORM**: Prisma 5.7.1
- **API Documentation**: Swagger/OpenAPI (@nestjs/swagger 7.1.17)
- **Validation**: class-validator 0.14.0
- **Serialization**: class-transformer 0.5.1
- **Authentication**: PassportJS (JWT, Local, Google OAuth)
  - passport-jwt 4.0.1
  - passport-local 1.0.0
  - passport-google-oauth20 2.0.0
- **Security**: bcrypt 5.1.1 (password hashing)
- **Rate Limiting**: @nestjs/throttler 5.0.1
- **HTTP**: Express (via @nestjs/platform-express)

## Module System
- **Architecture**: Odoo-style monolithic with dynamic module loading
- **Module Discovery**: Auto-discovery from `modules/` directory
- **Module Registry**: In-memory registry with database persistence
- **Module Loading**: Dynamic runtime loading of backend/frontend code
- **Configuration**: Manifest-based (`manifest.json` per module)

## Shared Packages
- **@wongsa/core-shared**: Shared types, API client, utilities
- **@wongsa/plugin-system**: Plugin framework and registry

## Development Tools
- **Type Checking**: TypeScript strict mode (enabled)
- **Linting**: ESLint + Prettier
- **Testing**: Jest 29.5.0 (backend)
- **Database Tools**: Prisma Studio, Prisma Migrate

## Port Configuration
- **Backend API**: http://localhost:3000
- **Frontend**: http://localhost:3001
- **Swagger Documentation**: http://localhost:3000/api

## Architecture Patterns
- **Monorepo**: pnpm workspaces + Turborepo
- **Module System**: Odoo-style (monolithic with dynamic modules)
- **Dependency Management**: Isolated node_modules (strict resolution)
- **Build Caching**: Turborepo for fast rebuilds
- **Type Safety**: Strict TypeScript across all packages